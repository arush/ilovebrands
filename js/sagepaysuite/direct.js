addValidationClass=function(a){if(a.hasClassName("validation-passed")){a.removeClassName("validation-passed")}a.addClassName("validate-issue-number")};changecsvclass=function(d){var b="sagepaydirectpro";if((typeof FORM_KEY)!="undefined"){b="sagepaydirectpro_moto"}var c=$(b+"_cc_type");var a=$(b+"_cc_cid");fillSagePayTestData();if(c){if(c.value=="LASER"&&a.hasClassName("required-entry")){if(a){a.removeClassName("required-entry")}}if(c.value!="LASER"&&!a.hasClassName("required-entry")){if(a){a.addClassName("required-entry")}}}};Validation.addAllThese([["validate-ccsgpdp-number","Please enter a valid credit card number.",function(a,c){var b=$(c.id.substr(0,c.id.indexOf("_cc_number"))+"_cc_type");if(b&&typeof Validation.creditCartTypes.get(b.value)!="undefined"&&Validation.creditCartTypes.get(b.value)[2]==false){if(!Validation.get("IsEmpty").test(a)&&Validation.get("validate-digits").test(a)){return true}else{return false}}if(b.value=="OT"||b.value=="UKE"||b.value=="DELTA"||b.value=="MAESTRO"||b.value=="SOLO"||b.value=="SWITCH"||b.value=="LASER"||b.value=="JCB"||b.value=="DC"){return true}return validateCreditCard(a)}],["validate-ccsgpdp-cvn","Please enter a valid credit card verification number.",function(a,e){var d=$(e.id.substr(0,e.id.indexOf("_cc_cid"))+"_cc_type");var b=$(e.id.substr(0,e.id.indexOf("_cc_cid"))+"_cc_cid");if(d){if(d.value=="LASER"&&b.hasClassName("required-entry")){if(b){b.removeClassName("required-entry")}}if(d.value!="LASER"&&!b.hasClassName("required-entry")){if(b){b.addClassName("required-entry")}}}else{return true}if(!d&&d.value!="LASER"){return true}var c=d.value;switch(c){case"VISA":case"MC":re=new RegExp("^[0-9]{3}$");break;case"AMEX":re=new RegExp("^[0-9]{4}$");break;case"MAESTRO":case"SOLO":case"SWITCH":re=new RegExp("^([0-9]{1}|^[0-9]{2}|^[0-9]{3})?$");break;default:re=new RegExp("^([0-9]{3}|[0-9]{4})?$");break}if(a.match(re)||c=="LASER"){return true}return false}],["validate-ccsgpdp-type","Credit card number doesn't match credit card type",function(c,f){f.value=removeDelimiters(f.value);c=removeDelimiters(c);var e=$(f.id.substr(0,f.id.indexOf("_cc_number"))+"_cc_type");if(!e){return true}var d=e.value;if(d=="OT"||d=="UKE"||d=="DELTA"||d=="MAESTRO"||d=="SOLO"||d=="SWITCH"||d=="LASER"||d=="JCB"||d=="DC"){return true}var b={VISA:new RegExp("^4[0-9]{12}([0-9]{3})?$"),MC:new RegExp("^5[1-5][0-9]{14}$"),AMEX:new RegExp("^3[47][0-9]{13}$")};var a="";$H(b).each(function(g){if(c.match(g.value)){a=g.key;throw $break}});if(a!=d){return false}return true}],["validate-ccsgpdp-type-select","Card type doesn't match credit card number",function(b,c){var a=$(c.id.substr(0,c.id.indexOf("_cc_type"))+"_cc_number");return Validation.get("validate-ccsgpdp-type").test(a.value,a)}],["validate-issue-number","Issue Number must have at least two characters",function(a,b){if(a.length>0&&!(a.match(new RegExp("^([0-9]{1}|[0-9]{2})$")))){return false}return true}]]);Validation.addAllThese([["validate-cc-ukss","Please enter issue number or start date for switch/solo card type.",function(h,d){var a;if(d.id.match(/(.)+_cc_issue$/)){a=d.id.indexOf("_cc_issue")}else{if(d.id.match(/(.)+_start_month$/)){a=d.id.indexOf("_start_month")}else{a=d.id.indexOf("_start_year")}}var c=d.id.substr(0,a);var b=$(c+"_cc_type");if(!b){return true}var g=b.value;if(g!="SS"){return true}$(c+"_cc_issue").advaiceContainer=$(c+"_start_month").advaiceContainer=$(c+"_start_year").advaiceContainer=$(c+"_cc_type_ss_div").down("ul li.adv-container");var e=$(c+"_cc_issue").value;var f=$(c+"_start_month").value;var i=$(c+"_start_year").value;if((!e&&!f&&!i)||(!e&&!f&&i)||(!e&&f&&!i)){return false}return true}]]);