suiteLogError=function(a){if(!window.console){return}console.error(a)};if(typeof EbizmartsSagePaySuite=="undefined"){var EbizmartsSagePaySuite={}}EbizmartsSagePaySuite.Conf=Class.create();EbizmartsSagePaySuite.Conf.prototype={initialize:function(a){this.config=a},getConfig:function(b,c){try{return this.config[b][c]}catch(a){return null}},setConfig:function(a,c,b){if((typeof this.config[a][c])=="undefined"){this.config[a][c]=b}}};fillSagePayTestData=function(){var a="direct";var b="sagepaydirectpro";if((typeof FORM_KEY)!="undefined"){a="directmoto";b="sagepaydirectpro_moto"}if(SuiteConfig.getConfig(a,"mode")!="test"&&SuiteConfig.getConfig(a,"mode")!="simulator"){return}SuiteConfig.getConfig(a,"test_data").evalJSON().each(function(f,c){if(f.code==$(b+"_cc_type").getValue()){$(b+"_cc_owner").value=(rstring()+" "+rstring());$(b+"_expiration").setValue(Math.floor(Math.random()*12)+1);var e=new Date();$(b+"_expiration_yr").setValue((parseInt(e.getFullYear())+(Math.floor(Math.random()*10)+1)));$(b+"_cc_number").value=f.ccn;$(b+"_cc_cid").value=f.cvv;if((typeof f.isn!="undefined")){$(b+"_cc_issue").value=f.isn}else{$(b+"_cc_issue").value=""}return}})};toggleNewCard=function(e){var b=$$("#order-billing_method_form [name='payment[method]']");var d=$$("#"+payment.form+" [name='payment[method]']");var g=$$("#multishipping-billing-form [name='payment[method]']");if(b.length){var a=b}else{if(g.length){var a=g}else{var a=d}}var h=null;if(a.length){a.each(function(j){if(j.checked){h=j.value}})}var f="div#payment_form_"+h;if(parseInt(e)==2){$$(f+" li",f+" ul").invoke("show");$$(f+" ul li.tokencard-radio input").each(function(j){j.disabled=true});if(b.length){$$(f+" ul.paymentsage select").each(function(j){j.disabled=false});$$(f+" ul.paymentsage input").each(function(j){j.disabled=false})}$$(f+" ul li.tokencard-radio",f+" a.addnew").invoke("hide")}else{var c=$$(f+" ul li.tokencard-radio input");if(parseInt(c.length)===0){return}if(b.length){$$(f+" ul.paymentsage select").each(function(j){j.disabled=true});$$(f+" ul.paymentsage input").each(function(j){j.disabled=true})}$$(f+" ul.paymentsage li",f+" ul.paymentsage").invoke("hide");c.each(function(j){j.disabled=false});$$(f+" ul li.tokencard-radio",f+" a.addnew").invoke("show")}};tokenRadioCheck=function(c,d){try{$(c).checked=true}catch(b){}var a=$$("#order-billing_method_form [name='payment[method]']");if(a.length){var e="div#payment_form_sagepaydirectpro_moto";$$(e+" ul.paymentsage select").each(function(f){f.disabled=true});$$(e+" ul.paymentsage input").each(function(f){f.disabled=true});$$("input.tokencvv").each(function(f){if(f.id!=d.id){f.disabled=true}})}};switchToken=function(a){$$("div.tokencvv").invoke("hide");$$("input.tokencvv").each(function(c){c.disabled="disabled"});if($("serversecure")){$("serversecure").hide()}var b=a.next("div");if((typeof b)!="undefined"){b.down().next().removeAttribute("disabled");b.show()}};rstring=function(){var c=rand(4,9);var b=new Array("b","c","d","f","g","h","j","k","l","m","n","p","r","s","t","v","w","x","y","z");var e=new Array("a","e","i","o","u");var a=c/2;var d="";for(i=1;i<=a;i++){d+=b[Math.floor(Math.random()*20)];d+=e[Math.floor(Math.random()*5)]}return d.charAt(0).toUpperCase()+d.slice(1)};rand=function(b,a){var c=arguments.length;if(c===0){b=0;a=2147483647}else{if(c===1){throw new Error("Warning: rand() expects exactly 2 parameters, 1 given")}}return Math.floor(Math.random()*(a-b+1))+b};